
// Database Schema for Restaurant Management System

Table companies {
  id integer [primary key]
  name varchar
  address text
  phone varchar
  email varchar [unique]
  logo_url varchar
  created_at timestamp
  updated_at timestamp
}

Table restaurants {
  id integer [primary key]
  name varchar
  description text
  address text
  phone varchar
  email varchar
  logo_url varchar
  created_at timestamp
  updated_at timestamp
  company_id integer [ref: > companies.id]
}

Table restaurant_settings {
  id integer [primary key]
  restaurant_id integer [ref: > restaurants.id]
  theme_color varchar
  currency varchar
  tax_rate decimal
  delivery_fee decimal
  opening_hours text
  created_at timestamp
  updated_at timestamp
}

Table users {
  id integer [primary key]
  restaurant_id integer [ref: > restaurants.id]
  full_name varchar
  username varchar
  phone varchar
  email varchar
  hashed_password varchar
  role_id integer [ref: > roles.id]
  created_at timestamp
  updated_at timestamp
}

Table roles {
  id integer [primary key]
  restaurant_id integer [ref: > restaurants.id]
  name varchar
}

Table menu {
  id integer [primary key]
  restaurant_id integer [ref: > restaurants.id]
  item_name varchar
  price decimal
  description text
  category_id integer [ref: > categories.id]
  created_at timestamp
  updated_at timestamp
}

Table categories {
  id integer [primary key]
  restaurant_id integer [ref: > restaurants.id]
  name varchar
}

Table orders {
  id integer [primary key]
  restaurant_id integer [ref: > restaurants.id]
  order_number integer
  user_id integer [ref: > users.id]
  price decimal
  payment_method varchar
  order_type varchar
  delivery_location text
  status varchar
  created_at timestamp
  updated_at timestamp
}

Table order_items {
  id integer [primary key]
  order_id integer [ref: > orders.id] 
  item_id integer [ref: > menu.id]   
  quantity integer
  created_at timestamp
  updated_at timestamp
}

Table deliveries {
  id integer [primary key]
  restaurant_id integer [ref: > restaurants.id]
  order_id integer [ref: > orders.id]
  driver_id integer [ref: > drivers.id]
  delivery_fee decimal
  status varchar
  delivered_at timestamp
}

Table drivers {
  id integer [primary key]
  restaurant_id integer [ref: > restaurants.id]
  user_id integer [ref: > users.id]
  vehicle_type varchar
  license_number varchar
}

Table payments {
  id integer [primary key]
  restaurant_id integer [ref: > restaurants.id]
  order_id integer [ref: > orders.id]
  amount decimal
  method varchar
  status varchar
  transaction_date timestamp
}

Table employees {
  id integer [primary key]
  restaurant_id integer [ref: > restaurants.id]
  user_id integer [ref: > users.id]
  position varchar
  salary decimal
  hired_at timestamp
  updated_at timestamp
}

Table salary_withdrawals {
  id integer [primary key]
  employee_id integer [ref: > employees.id]
  amount decimal
  status varchar
  requested_at timestamp
  processed_at timestamp
}

Table employee_requests {
  id integer [primary key]
  employee_id integer [ref: > employees.id]
  request_type varchar
  description text
  status varchar
  created_at timestamp
  updated_at timestamp
}

Table reviews {
  id integer [primary key]
  restaurant_id integer [ref: > restaurants.id]
  user_id integer [ref: > users.id]
  order_id integer [ref: > orders.id]
  rating integer
  comment text
  created_at timestamp
}

// Relationships
Ref: companies.id < restaurants.company_id
Ref: restaurants.id < restaurant_settings.restaurant_id
Ref: restaurants.id < users.restaurant_id
Ref: restaurants.id < roles.restaurant_id
Ref: restaurants.id < menu.restaurant_id
Ref: restaurants.id < categories.restaurant_id
Ref: restaurants.id < orders.restaurant_id
Ref: restaurants.id < deliveries.restaurant_id
Ref: restaurants.id < drivers.restaurant_id
Ref: restaurants.id < payments.restaurant_id
Ref: restaurants.id < employees.restaurant_id
Ref: users.id < orders.user_id
Ref: users.id < drivers.user_id
Ref: users.id < employees.user_id
Ref: roles.id < users.role_id
Ref: menu.id < order_items.item_id
Ref: orders.id < order_items.order_id
Ref: orders.id < deliveries.order_id
Ref: orders.id < payments.order_id
Ref: employees.id < salary_withdrawals.employee_id
Ref: employees.id < employee_requests.employee_id
Ref: orders.id < reviews.order_id
Ref: users.id < reviews.user_id
Ref: restaurants.id < reviews.restaurant_id
